<div class="user-line-container">

  <hal-app-list></hal-app-list>

  <span class="user-name">{{ user?.name }}</span>
  <button class="user-button" [matMenuTriggerFor]="menu" (focus)="hasFocus = true" (blur)="hasFocus = false">
    <img [src]="thumbnailUrl" *ngIf="user?.thumbnail; else defaultThumb">
    <ng-template #defaultThumb>
      <div class="initials-container">
        <span class="user-initials">{{initials}}</span>
      </div>
    </ng-template>
    <div class="overlay" [class.focus]="hasFocus"></div>
  </button>
</div>
<mat-menu #menu="matMenu">
  <a class="hdd-button-icon is-transparent settings-button" [routerLink]="['', settingsPagePath]">
    <mat-icon class="fal fa-cog"></mat-icon>
  </a>
  <div class="content-wrapper" (click)="cancelMouseEventBubble($event)">
    <div class="image-container" *ngIf="user?.thumbnail; else defaultImage">
      <img [src]="thumbnailUrl">
    </div>
    <ng-template #defaultImage>
      <i class="material-icons default-picture">account_circle</i>
    </ng-template>
    <h4 class="mat-subheading-1">{{ user?.name ? user.name : 'Navn mangler' }}</h4>
    <small>{{ user?.email | lowercase }}</small>
    <div class="divider"></div>
  </div>
  <button mat-menu-item class="sign-out-button" (click)="signOut()">Logg ut</button>
</mat-menu>
